<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>PrimeFaces</title>
            </f:facet>
        </h:head>

        <h:body>
            

            <p:layout fullPage="true">

                <p:layoutUnit class="td" position="north" size="100" resizable="true" closable="true" collapsible="true">
                    Header
                </p:layoutUnit>

                <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                    Footer
                </p:layoutUnit>

                <p:layoutUnit position="west" size="175" header="Left" collapsible="true">
                    <p:menu>
                        <p:submenu label="Resources">
                            <p:menuitem value="Demo" url="http://www.primefaces.org/showcase-labs/ui/home.jsf" />
                            <p:menuitem value="Documentation" url="http://www.primefaces.org/documentation.html" />
                            <p:menuitem value="Forum" url="http://forum.primefaces.org/" />
                            <p:menuitem value="Themes" url="http://www.primefaces.org/themes.html" />

                        </p:submenu>

                    </p:menu>
                </p:layoutUnit>

                <p:layoutUnit position="center">
                    Welcome to PrimeFaces
                </p:layoutUnit>

            </p:layout>

        </h:body>

    </f:view>
</html>



<!-- ancien template -->

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:b="http://bootsfaces.net/ui">

    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link  src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"/>
    <link src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"/>


    <h:head>
        <title><ui:insert name="title">Default Title</ui:insert></title>
        <h:outputStylesheet library="css" name="jsfcrud.css"/>       
        <h:outputStylesheet library="css" name="css/bootstrap.css"/>       
        <h:outputScript library="js" name="jsfcrud.js"/>
    </h:head>
    <h:body>
        <style >
            .menuitem{
                text-align: center ;font-size: 12pt;margin-left:10px ;
            }
            .submenu{
                text-align: center ;font-size: 12pt;padding-left:20px; 
            }

        </style>
            <b:growl id="growl" class="alert alert-danger" />

            <p:layout fullPage="true">

            <p:layoutUnit position="north" size="65" >
                <h:form id="menuForm">
                    <p:menubar class="active" style="background: mediumseagreen;border-color:lightgrey;margin: 7px" >
                        <p:menuitem class="menuitem" value="#{bundle.Home}" style="width:150px" outcome="/inaccessible/user/Home" icon="ui-icon-home"/>
                        <p:submenu style="width: 150px" class="submenu" label="Systeme d'adressage" >
                            <p:menuitem value="Adressage" outcome="/inaccessible/search/Adrressage"  />
                            <p:menuitem value="Redevable" outcome="/inaccessible/redevable/List.xhtml"  />
                            <p:menuitem value="Locale" outcome="/inaccessible/locale/List.xhtml" />
                        </p:submenu>

                        <p:submenu class="submenu" label="Service de taxe" style="width: 150px;" >
                            <p:menuitem value="TauxTaxe" outcome="/inaccessible/tauxTaxe/List.xhtml" />
                            <p:menuitem value="TauxTaxeRetard" outcome="/inaccessible/tauxTaxeRetard/List.xhtml" />
                            <p:menuitem value="TaxeAnnuel" outcome="/inaccessible/taxeAnnuel/List.xhtml" />
                            <p:menuitem value="TaxeTrim" outcome="/inaccessible/taxeTrim/List.xhtml"  />
                            <p:menuitem value="Categorie" outcome="/inaccessible/categorie/List.xhtml"  />

                        </p:submenu>
                        <p:submenu class="submenu" label="Admin Manager" style="width: 150px;" >
                            <p:menuitem value="Profile" outcome="/inaccessible/user/Profil.xhtml" />
                            <p:menuitem value="User" outcome="/inaccessible/user/List.xhtml" />
                            <p:menuitem value="Journal des actions" outcome="/inaccessible/journal/List.xhtml" />
                            <p:menuitem value="Historique des connections" outcome="/inaccessible/historique/List.xhtml"  />
                            <p:menuitem value="Devices" outcome="/inaccessible/device/List.xhtml"  />
                        </p:submenu>
                        <p:submenu class="submenu" label="Recherchers" icon="ui-icon-search" style="width: 150px">
                            <p:menuitem value="redevable" action="/inaccessible/search/SearchRedevable" />
                            <p:menuitem value="locale" outcome="/inaccessible/search/SearchLocale" />
                            <p:menuitem value=" taxeTrim " outcome="/inaccessible/search/SearchTaxeTrim.xhtml" />
                        </p:submenu>
                        <p:menuitem value="Statistiques" class="pull-right" style="width:100px" outcome="/inaccessible/charts/grapheCritere" >
                        </p:menuitem>


                    </p:menubar>
                </h:form>
            </p:layoutUnit>

            <p:layoutUnit position="south" size="60">
                <ui:insert name="footer"/>
            </p:layoutUnit>

            <p:layoutUnit position="center">
                <ui:insert name="body"/>
            </p:layoutUnit>

        </p:layout>


    </h:body>

</html>











<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet name="/resources/css/bootstrap.css"/>
        <h:outputScript name="/resources/js/jquery.js"/>
        <h:outputScript name="/resources/js/bootstrap.js"/>
    </h:head>

    <ui:composition template="../template.xhtml">


        <ui:define name="title">
            <h:outputText value="#{bundle.ListLocaleTitle}"></h:outputText>
        </ui:define>

        <ui:define name="body">
            <h:form id="LocaleListForm" >
                <div class="table-responsive">
                    <p:dataTable id="datalist" value="#{localeController.items}" var="item"
                                 selectionMode="single" 
                                 paginator="true"
                                 rowKey="#{item.id}"
                                 rows="10"
                                 rowsPerPageTemplate="10,20,30,40,50"
                                 style="background-color: #8c8c8c !important;font-weight: 600 !important"
                                 >

                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_reference}"/>
                            </f:facet>
                            <h:outputText value="#{item.reference}"/>
                        </p:column>
                        
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="Nom "/>
                            </f:facet>
                            <h:outputText value="#{item.nom}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_categorie}"/>
                            </f:facet>
                            <h:outputText value="#{item.categorie.nom}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_rue}"/>
                            </f:facet>
                            <h:outputText value="#{item.rue.nom}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_complementAdresse}"/>
                            </f:facet>
                            <h:outputText value="#{item.complementAdresse}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_activite}"/>
                            </f:facet>
                            <h:outputText value="#{item.activite}"/>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_description}"/>
                            </f:facet>
                            <h:outputText value="#{item.description}"/>
                        </p:column>
                         <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_proprietaire}"/>
                            </f:facet>
                             <p:commandButton update="proprtDetail" oncomplete="PF('thisProprietaire').show('#{component.clientId}')" icon="ui-icon-search" style="float: right" title="detail">
                                <h:outputText value="#{item.proprietaire.cin==''?item.proprietaire.rc:item.proprietaire.cin}" />
                            </p:commandButton>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_gerant}"/>
                            </f:facet>
                            <p:commandButton update="gerantDetail" oncomplete="PF('thisGerant').show('#{component.clientId}')" icon="ui-icon-search" style="float: right" title="detail" >
                            <h:outputText value="#{item.gerant.cin==''?item.gerant.rc:item.gerant.cin}" />
                            </p:commandButton>

                        </p:column>
                         <p:column>
                            <f:facet name="header">
                                <h:outputText value="#{bundle.ListLocaleTitle_gerant}"/>
                            </f:facet>
                              <p:commandButton id="viewButton"   icon="ui-icon-search"  actionListener="#{localeController.preparUpdate(item)}" update=":LocaleViewForm" oncomplete="PF('LocaleViewDialog').show()" style="background:#337ab7" />
                            <p:commandButton id="editButton"   icon="ui-icon-pencil" actionListener="#{localeController.preparUpdate(item)}" update=":LocaleEditForm,:redevableEditForm" oncomplete="PF('LocaleEditDialog').show()" style="background:#f0ad4e" />
                             <p:growl id="message" showDetail="true" />
                             <p:commandButton id="deleteButton" icon="ui-icon-trash" actionListener="#{localeController.destroy(item)}" update=":growl,datalist,message"
                                             style="background:#d9534f"  >
                                <p:confirm header="Confirmation" message="Vous etes sure?" icon="ui-icon-alert" />
                            </p:commandButton>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Oui" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                <p:commandButton value="Non" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            </p:confirmDialog>
                        </p:column>
                        <f:facet name="footer">
                             <div class=" col-lg-3"/>
                            <div class="col-lg-6 center-block">
                             <p:commandButton id="createButton" icon="ui-icon-plus" iconPos="right"  value="#{bundle.Create}" actionListener="#{localeController.prepareCreate}" update=":LocaleCreateForm" oncomplete="PF('LocaleCreateDialog').show()"
                                            style="background:#00abeb;font-size: 10pt !important ;color: white !important" class="form-control btn btn-primary"  />
                              </div>
                            <div class=" col-lg-3"/>
                        </f:facet>
                    </p:dataTable>
                </div>
            </h:form>

            <p:overlayPanel widgetVar="thisGerant" showEffect="fade" hideEffect="fade" dismissable="false" showCloseIcon="true">
                <p:outputPanel id="gerantDetail" style="text-align:center;">
                    <p:panelGrid  columns="2" rendered="#{not empty localeController.selected.gerant}" columnClasses="label,value">
                        <h:outputText value="Cin" />
                        <h:outputText value="#{localeController.selected.gerant.cin}" />
                        <h:outputText value="Nom" />
                        <h:outputText value="#{localeController.selected.gerant.nom}" />
                        <h:outputText value="Prénom" />
                        <h:outputText value="#{localeController.selected.gerant.prenom}" />

                        <h:outputText value="Adresse" />
                        <h:outputText value="#{localeController.selected.gerant.adresse}" />

                        <h:outputText value="Pattente" />
                        <h:outputText value="#{localeController.selected.gerant.pattente}"/>

                        <h:outputText value="Email" />
                        <h:outputText value="#{localeController.selected.gerant.email}" />
                    </p:panelGrid>
                </p:outputPanel>
            </p:overlayPanel>


            <p:overlayPanel widgetVar="thisProprietaire" showEffect="fade" hideEffect="fade" dismissable="false" showCloseIcon="true">
                <p:outputPanel id="proprtDetail" style="text-align:center;">
                    <p:panelGrid  columns="2" rendered="#{not empty localeController.selected.proprietaire}" columnClasses="label,value">
                        <h:outputText value="Cin" />
                        <h:outputText value="#{localeController.selected.proprietaire.cin}" />
                        <h:outputText value="Nom" />
                        <h:outputText value="#{localeController.selected.proprietaire.nom}" />
                        <h:outputText value="Prénom" />
                        <h:outputText value="#{localeController.selected.proprietaire.prenom}" />
                        <h:outputText value="Adresse" />
                        <h:outputText value="#{localeController.selected.proprietaire.adresse}" />

                        <h:outputText value="Pattente" />
                        <h:outputText value="#{localeController.selected.proprietaire.pattente}"/>

                        <h:outputText value="Email" />
                        <h:outputText value="#{localeController.selected.proprietaire.email}" />
                    </p:panelGrid>
                </p:outputPanel>
            </p:overlayPanel>
            <ui:include src="Create.xhtml"/>
            <ui:include src="Edit.xhtml"/>
            <ui:include src="View.xhtml"/>
        </ui:define>
    </ui:composition>

</html>

<!-- positioneer un locale en fornction d'adrese -->


<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet name="/resources/css/bootstrap.css"/>
        <h:outputScript name="/resources/js/jquery.js"/>
        <h:outputScript name="/resources/js/bootstrap.js"/>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBDNr0iHK-GjfC5Oj_D3Us6j6a1gxLDAg8" sensor="false">

        </script>
        <script type="text/javascript">
            var currentMarker = null;
            function createLocalesMarkersInOverlay(positionsLocales) {
                PF('mapa')._render();
                console.log(positionsLocales);
                for (var i = 0; i&lt; positionsLocales.length; i++) {
                    var positionsLocale = positionsLocales[i];
                    currentMarker = new google.maps.Marker({position: new google.maps.LatLng(positionsLocale.lat, positionsLocale.lng)});
                    PF('mapa').addOverlay(currentMarker);
                }
            }
        </script>
        
    </h:head>


    <h:body>
         <div class="container" >
        <div class="col-lg-5">
        
            <h:form id="redevableCreateForm">
                <h:panelGroup id="display">
                    <p:panelGrid columns="2" rendered="#{localeController.selected != null}">

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_proprietaire}" for="proprietaire" />
                        <p:inputText id="proprietaire" value="#{localeController.proprietaireCinRc}">
                            <p:commandButton actionListener="#{localeController.findProprietaireByCinOrRc()}" icon="ui-icon-search" update=":LocaleCreateForm:proprietaire,:LocaleCreateForm:save"/>
                        </p:inputText>

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_gerant}" for="gerant" />
                        <p:inputText id="gerant" value="#{localeController.gerantCinRc}">
                            <p:commandButton actionListener="#{localeController.findGerantByCinOrRc()}" icon="ui-icon-search" update=":LocaleCreateForm:gerant,:LocaleCreateForm:save"/>
                        </p:inputText>


                    </p:panelGrid>

                </h:panelGroup>

            </h:form>
            <br/><br/>

            <h:form id="LocaleCreateForm">
                <h:panelGroup id="display">
                    <p:panelGrid columns="2" rendered="#{localeController.selected != null}">

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_proprietaire} " for="proprietaire" />
                        <h:outputText id="proprietaire" value="#{localeController.selected.proprietaire.nom}"/>

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_gerant}" for="gerant" />
                        <h:outputText id="gerant" value="#{localeController.selected.gerant.nom}" />



                        <p:outputLabel value="#{bundle.CreateLocaleLabel_categorie}" for="categorie" />
                        <p:selectOneMenu id="categorie" value="#{localeController.selected.categorie}" >
                            <f:selectItems value="#{categorieController.itemsAvailableSelectOne}"
                                           var="categorieItem"
                                           itemValue="#{categorieItem}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_activite}" for="activite" />
                        <p:inputText id="activite" value="#{localeController.selected.activite}" title="#{bundle.CreateLocaleTitle_activite}" />

                        <p:outputLabel value="secteur" />
                        <p:selectOneMenu id="secteur"  value="#{localeController.secteur}" >
                            <f:selectItem itemValue="#{null}" itemLabel="--SELECT--"/>
                            <f:selectItems value="#{secteurController.items}"
                                           var="secteurItem" 
                                           itemValue="#{secteurItem}"/>
                            <p:ajax process="secteur" listener="#{localeController.findAnnexs()}" update="annexAdministratif,quartier,rue" />
                        </p:selectOneMenu>

                        <p:outputLabel value="annexAdministratif" />
                        <p:selectOneMenu id="annexAdministratif"  value="#{localeController.annexeAdministratif}" >
                            <f:selectItem itemValue="#{null}" itemLabel="--SELECT--"/>
                            <f:selectItems value="#{localeController.secteur.annexeAdministratifs}"
                                           var="annexAdministratifItem" 
                                           itemValue="#{annexAdministratifItem}"/>
                            <p:ajax process="annexAdministratif" listener="#{localeController.findQuartiers()}" update="quartier,rue" />
                        </p:selectOneMenu>

                        <p:outputLabel value="quartier" />
                        <p:selectOneMenu id="quartier"  value="#{localeController.quartier}" >
                            <f:selectItem itemValue="#{null}" itemLabel="--SELECT--"/>
                            <f:selectItems value="#{localeController.annexeAdministratif.quartiers}"
                                           var="quartierItem" 
                                           itemValue="#{quartierItem}"/>
                            <p:ajax process="quartier" listener="#{localeController.findRues()}" update="rue" />
                        </p:selectOneMenu>

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_rue}" for="rue" />
                        <p:selectOneMenu id="rue" value="#{localeController.selected.rue}" >
                            <f:selectItem itemValue="#{null}" itemLabel="--SELECT--"/>
                            <f:selectItems value="#{localeController.quartier.rues}"
                                           var="rueItem"
                                           itemValue="#{rueItem}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="#{bundle.CreateLocaleLabel_complementAdresse}" for="complementAdresse" />
                        <p:inputText id="complementAdresse" value="#{localeController.selected.complementAdresse}" title="#{bundle.CreateLocaleTitle_complementAdresse}" />
                        <p:outputLabel value="#{bundle.CreateLocaleLabel_description}" for="description" />
                        <p:inputText id="description" value="#{localeController.selected.description}" title="#{bundle.CreateLocaleTitle_description}" />

                    </p:panelGrid>
                    <p:commandButton id="save" actionListener="#{localeController.create}" value="#{bundle.Save}"  
                                     disabled="#{empty localeController.selected.gerant.id and empty localeController.selected.proprietaire.id}"/>
                    <p:commandButton actionListener="#{localeController.prepareCreate()}" value="prepare" />
                </h:panelGroup>
            </h:form>
        </div>
            <div class="col-lg-7">
        <h:form  prependId="false">
            <p:growl id="messages" showDetail="true" life="2000"  />

            <p:gmap center="31.625832802876324,-7.988905906677246" id="map" zoom="15" type="ROADMAP" widgetVar="mapa"  style="width:600px;height:400px" onPointClick="handlePointClick(event);"  >

            </p:gmap> 
            <p:remoteCommand name="onPoint" actionListener="#{localeController.onPointSelect}" update="messages,lat,lng" />
            
            <h:inputText id="lat" value="#{localeController.lat}" />
            <h:inputText id="lng" value="#{localeController.lng}" />

        </h:form></div></div>

<script type="text/javascript" >
            function handlePointClick(event) {

                if (navigator.geolocation)
                {
                    browserSupportFlag = true;
                    var latlng = event.latLng;
                    geocoder = new google.maps.Geocoder();
                    geocoder.geocode({'latLng': latlng}, function(results, status)
                    {
                        if (status === google.maps.GeocoderStatus.OK)
                        {
        onPoint([ {name: 'lng', value:event.latLng.lng()}, {name: 'lat', value: event.latLng.lat()}]);

                        }
                    });
                }
            }
        </script>
    </h:body>


</html>


<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet name="/resources/css/bootstrap.css"/>
        <h:outputScript name="/resources/js/jquery.js"/>
        <h:outputScript name="/resources/js/bootstrap.js"/>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBDNr0iHK-GjfC5Oj_D3Us6j6a1gxLDAg8" sensor="false">

        </script>
        <script type="text/javascript">
            var currentMarker = null;
            function createLocalesMarkersInOverlay(positionsLocales) {
                PF('mapa')._render();
                console.log(positionsLocales);
                for (var i = 0; i&lt; positionsLocales.length; i++) {
                    var positionsLocale = positionsLocales[i];
                    currentMarker = new google.maps.Marker({position: new google.maps.LatLng(positionsLocale.lat, positionsLocale.lng)});
                    PF('mapa').addOverlay(currentMarker);
                }
            }
        </script>
        
    </h:head>


    <h:body>
        <p:dialog id="mapDlg" widgetVar="mapDialog" >
         <div class="container" >
        
            <div class="col-lg-7">
                <h:form id="mapForm"  prependId="false">
            <p:outputLabel value="hhhhhhhhhhhhhhh"/>
            <p:growl id="messages" showDetail="true" life="2000"  />

            <p:gmap center="31.625832802876324,-7.988905906677246" id="map" zoom="15" type="ROADMAP" widgetVar="mapa"  style="width:600px;height:400px" onPointClick="handlePointClick(event);"  >

            </p:gmap> 
            <p:remoteCommand name="onPoint" actionListener="#{localeController.onPointSelect}" update="messages,lat,lng,save" />
            
            <h:inputText id="lat" value="#{localeController.lat}" />
            <h:inputText id="lng" value="#{localeController.lng}" />
            <p:commandButton id="save" value="Positionner Ici" actionListener="#{localeController.attachPositionToLocale()}" update=":growl" 
                             disabled="#{empty localeController.selected or localeController.lat==0 or localeController.lng==0}" oncomplete="handleSubmit(args,'mapDialog');" 
        </h:form></div></div>
        </p:dialog>

<script type="text/javascript" >
            function handlePointClick(event) {

                if (navigator.geolocation)
                {
                    browserSupportFlag = true;
                    var latlng = event.latLng;
                    geocoder = new google.maps.Geocoder();
                    geocoder.geocode({'latLng': latlng}, function(results, status)
                    {
                        if (status === google.maps.GeocoderStatus.OK)
                        {
        onPoint([ {name: 'lng', value:event.latLng.lng()}, {name: 'lat', value: event.latLng.lat()}]);

                        }
                    });
                }
            }
        </script>
    </h:body>


</html>
